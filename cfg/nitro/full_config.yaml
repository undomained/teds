# Cobined config file for all steps in E2E analysis.
#
header:
    file_name: 'full_config.yaml'
    version: '0.000'
#########################################################
# General settings. 
# Used by more than one step in the E2E simulator
#########################################################
gm_file: '../data/no2/geometry.nc'
#ckd_input: '../data/no2/ckd/ckd.nc'
#binning_table: '../data/no2/ckd/binning_table.nc'
#ckd_input: '../data/no2/ckd/ckd_nitro_20240229.nc'
ckd_input: '../data/no2/ckd/ckd_nitro_20240301.nc'
binning_table: '../data/no2/ckd/binning_table_no2.nc'
#l1a_file: '../data/no2/l1a.nc'
l1a_file: '../data/no2/l1a_test.nc'
#########################################################
#
# GM 
# Configuration file for running the geometry module
#
#########################################################
#
profile: orbit
#        
orbit:
  epoch: 2022-08-12T12:00:00
  sat_height: 500.0     # km
  eccentricity: 0.0
  arg_perigee: 0.0
  mean_anomaly: 0.0
  ltan: 13.823            # decimal hours
  mean_motion_dot: 0.0
  drag_coeff: 0.0
  propagation_duration: 1.67 #hours
#
sensors:
  sensor_00__00:
    n_ground_pixels: 100
    swath_width: 30.0   # km
    integration_time: 0.04 # seconds
    alt_sampling: 0.300 # km
    start_time: 13.73 # minutes wrt orbit epoch
    end_time: 13.80   # minutes wrt orbit epoch
    pitch: 0.0
    roll: 0.0
    yaw: 0.0
# TODO: maybe we want to call this gm_output and gm_output_title?
# Following is common with L1AL1B. See below
#gm_file: '../data/no2/geometry.nc'
gm_title: 'Tango Nitro E2ES GM output'
#
#########################################################
#
# IM specific
# Configuration file for running the Instrument module
#
#########################################################

rad_input: '../data/no2/sgm_radiance.nc'
#IM_path:  './'                                         #Where the .cfg file needed to run C++ code will be placed
IM_path:  '../cfg/nitro/'                                         #Where the .cfg file needed to run C++ code will be placed
# Following settings are common with L1AL1B
#ckd_input: '../data/no2/ckd/ckd.nc'
#binning_table: '../data/no2/ckd/binning_table.nc'
#l1a_file: '../data/no2/l1a.nc'
############################
settings_IM:
# Not used in create_im_config script:
#    fmc:             5                                  #forward motion compensation
    bin_id:          1                                   #across track binning
    co_adding:       4                                   #along track co-addng
    exp_time:        0.066                               #exposure time [sec]
# Not used in create_im_config script:
#    stray_interpolating: yes                             #Whether to use interpolating stray light kernels
    sw_dark:         1                                   #switch dark current (1 on, 0 off)
    sw_nonlin:       1                                   #switch non-linearity (1 on, 0 off)
    sw_prnu:         1                                   #switch pixel response non-uniformity (1 on, 0 off)
    sw_stray:        0                                   #switch dark spectrometer stray light (1 on, 0 off)
#    sw_stray:        1                                   #switch dark spectrometer stray light (1 on, 0 off)
    sw_rad:          1                                   #switch radiometric calibration (1 on, 0 off)
############################
isrf:
    convolution:     1                                   #switch spectral convolution (1=yes), (0=no)
    fwhm:            0.45                                #full width half max [nm]
############################    
select_images:       False                               #select certain images form the sgm input
first_image:         0
last_image:          1
############################
noise:
    switch:          0                                   # switch noise on (1) or off (0)
    seed:            100                                 #seed for random generator
############################    
#########################################################
#
# L1AL1B specific
# Configuration file for running the L1AL1B module 
#
#########################################################
#
# Following settings are common with IM
#ckd_input: '../data/no2/ckd/ckd.nc'
#binning_table: '../data/no2/ckd/binning_table.nc'
#l1a_file: '../data/no2/l1a.nc'
# Following is commom with GM
#gm_file: '../data/no2/geometry.nc'
l1b_file: '../data/no2/l1b.nc'
#L1AL1B_path:  './'
L1AL1B_path:  '../cfg/nitro/'                                         #Where the .cfg file needed to run C++ code will be placed
############################
settings_L1AL1B:
    geolocation:  0       #calculate geolocation (0 no, 1 yes), currently only 0 possible
    van_cittert_steps: 4  #van Citter iteration for stray light correction (0=no correction)
    sw_dark:         1                                   #switch dark current (1 on, 0 off)
    sw_nonlin:       1                                   #switch non-linearity (1 on, 0 off)
    sw_prnu:         1                                   #switch pixel response non-uniformity (1 on, 0 off)
#    sw_stray:        1                                   #switch dark spectrometer stray light (1 on, 0 off)
    sw_rad:          1                                   #switch radiometric calibration (1 on, 0 off)
############################    

